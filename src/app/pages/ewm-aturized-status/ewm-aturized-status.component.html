<div class="container mx-auto p-6 space-y-8">

  <!-- ✅ Alert -->
  <div *ngIf="alertMessage" [ngClass]="{
      'bg-green-100 border-green-400 text-green-800': alertType === 'success',
      'bg-red-100 border-red-400 text-red-800': alertType === 'error'
    }" class="border px-4 py-3 rounded-xl shadow-sm flex items-center gap-3 animate-fade-slide">
    <div [ngClass]="{
        'bg-green-500': alertType === 'success',
        'bg-red-500': alertType === 'error'
      }" class="w-8 h-8 flex items-center justify-center rounded-full text-white shadow-md">
      <i [ngClass]="{
          'fa fa-check': alertType === 'success',
          'fa fa-times': alertType === 'error'
        }"></i>
    </div>
    <p class="text-sm font-medium">{{ alertMessage }}</p>
  </div>

  <!-- 🏷️ Header -->
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 animate-fade-slide">
    <h1 class="text-3xl font-extrabold text-gray-900 tracking-tight">
      Authorized Statuses
    </h1>
    <button (click)="toggleForm()"
      class="flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white px-5 py-2.5 rounded-xl shadow-md hover:shadow-lg hover:opacity-95 transition-all duration-200">
      <i class="fa" [ngClass]="isFormVisible ? 'fa-times' : 'fa-plus'"></i>
      {{ isFormVisible ? 'Cancel' : 'Add New Status' }}
    </button>
  </div>

  <!-- 🧾 Form -->
  <div *ngIf="isFormVisible" class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 animate-fade-slide">
    <h2 class="text-2xl font-semibold mb-4 text-gray-800 border-b pb-2">
      {{ isEditing ? 'Edit Status' : 'Add Status' }}
    </h2>

    <form (ngSubmit)="saveStatus()" class="grid grid-cols-1 sm:grid-cols-2 gap-6 mt-4">
      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">Code</label>
        <input [(ngModel)]="selectedStatus.codeAtorisedStatus" name="codeAtorisedStatus" type="text"
          class="w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
          placeholder="Enter code" required />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-600 mb-1">Value</label>
        <input [(ngModel)]="selectedStatus.valueAtorisedStatus" name="valueAtorisedStatus" type="text"
          class="w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
          placeholder="Enter value" required />
      </div>

      <div class="flex items-center gap-2">
        <input [(ngModel)]="selectedStatus.okStatus" name="okStatus" type="checkbox"
          class="h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" />
        <label class="text-sm text-gray-700 font-medium">OK Status</label>
      </div>

      <div class="flex items-center gap-2">
        <input [(ngModel)]="selectedStatus.nokStatus" name="nokStatus" type="checkbox"
          class="h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" />
        <label class="text-sm text-gray-700 font-medium">NOK Status</label>
      </div>

      <div class="flex items-center gap-2">
        <input [(ngModel)]="selectedStatus.allStatus" name="allStatus" type="checkbox"
          class="h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" />
        <label class="text-sm text-gray-700 font-medium">All Status</label>
      </div>

      <div class="sm:col-span-2 flex justify-end mt-4">
        <button type="submit"
          class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-2.5 rounded-lg shadow-md hover:opacity-90 transition-all duration-200">
          {{ isEditing ? 'Update' : 'Save' }}
        </button>
      </div>
    </form>
  </div>

  <!-- 📋 Table -->
  <div class="overflow-x-auto rounded-2xl shadow-lg border border-gray-100 animate-fade-slide">
    <table class="min-w-full divide-y divide-gray-200 text-sm">
      <thead class="bg-gradient-to-r from-gray-100 to-gray-200">
        <tr>
          <th class="px-6 py-3 text-left font-semibold text-gray-700 uppercase tracking-wider">Code</th>
          <th class="px-6 py-3 text-left font-semibold text-gray-700 uppercase tracking-wider">Value</th>
          <th class="px-6 py-3 text-left font-semibold text-gray-700 uppercase tracking-wider">OK</th>
          <th class="px-6 py-3 text-left font-semibold text-gray-700 uppercase tracking-wider">NOK</th>
          <th class="px-6 py-3 text-left font-semibold text-gray-700 uppercase tracking-wider">All</th>
          <th class="px-6 py-3 text-left font-semibold text-gray-700 uppercase tracking-wider">Actions</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-100">
        <tr *ngFor="let status of aturizedStatuses" (click)="editStatus(status)"
          class="cursor-pointer hover:bg-blue-50 transition-all duration-200">
          <td class="px-6 py-4 font-medium text-gray-800">{{ status.codeAtorisedStatus }}</td>
          <td class="px-6 py-4 text-gray-700">{{ status.valueAtorisedStatus }}</td>

          <!-- OK Badge -->
          <td class="px-6 py-4">
            <span class="px-2 py-1 rounded-full text-xs font-semibold"
              [ngClass]="status.okStatus ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-400'">
              {{ status.okStatus ? 'Yes' : 'No' }}
            </span>
          </td>

          <!-- NOK Badge -->
          <td class="px-6 py-4">
            <span class="px-2 py-1 rounded-full text-xs font-semibold"
              [ngClass]="status.nokStatus ? 'bg-pink-100 text-pink-800' : 'bg-gray-100 text-gray-400'">
              {{ status.nokStatus ? 'Yes' : 'No' }}
            </span>
          </td>

          <!-- All Badge -->
          <td class="px-6 py-4">
            <span class="px-2 py-1 rounded-full text-xs font-semibold"
              [ngClass]="status.allStatus ? 'bg-cyan-100 text-cyan-800' : 'bg-gray-100 text-gray-400'">
              {{ status.allStatus ? 'Yes' : 'No' }}
            </span>
          </td>

          <td class="px-6 py-4 text-right">
            <button (click)="deleteStatus(status.idewm_Aturized_Status!); $event.stopPropagation()"
              class="text-red-500 hover:text-red-700 font-medium transition">
              <i class="fa fa-trash mr-1"></i> Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>